// Language data object containing all translations
const translations = {
    es: {
        // Navigation
        nav_home: "Inicio",
        nav_details: "Detalles",
        nav_rsvp: "Confirmar Asistencia",
        
        // Home page
        header_date: "11 de abril, 2026",
        home_title: "¡Nos Casamos!",
        home_description: "Estamos emocionados de celebrar nuestro día especial contigo. Por favor explora nuestro sitio web para encontrar toda la información que necesitarás para nuestra boda.",
        rsvp_button: "Confirmar Asistencia",
        countdown_title: "Cuenta Regresiva para Nuestro Gran Día",
        countdown_days: "Días",
        countdown_hours: "Horas",
        countdown_minutes: "Minutos",
        countdown_seconds: "Segundos",
        countdown_finished: "¡Nuestro Día Especial Ha Llegado!",
        
        // Details page
        details_title: "Detalles de la Boda",
        details_description: "Aquí está todo lo que necesitas saber sobre nuestro día especial.",
        ceremony_title: "Ceremonia y Recepción",
        venue_title: "El Lugar",
        venue_date: "Fecha:",
        venue_time: "Hora:",
        venue_location: "Ubicación:",
        venue_description: "La ceremonia y recepción se llevarán a cabo en los hermosos Jardines Bella Vista. La ceremonia comenzará puntualmente a las 3:00 PM, seguida de un cóctel y la recepción.",
        
        accommodations_title: "Alojamiento",
        hotels_title: "Hoteles Recomendados",
        hotel_code: "Hemos conseguido una tarifa especial para nuestros invitados. Usa el código \"MARIANELYDANIEL\" al reservar.",
        hotel_boutique: "Un encantador hotel boutique a solo 5 minutos a pie del lugar.",
        
        schedule_title: "Cronograma",
        timeline_title: "Cronograma del Día de la Boda",
        timeline_arrival: "Llegada de Invitados",
        timeline_ceremony: "Comienza la Ceremonia",
        timeline_cocktail: "Hora del Cóctel",
        timeline_reception: "Recepción",
        timeline_dinner: "Servicio de Cena",
        timeline_first_dance: "Primer Baile",
        timeline_dance_floor: "Pista de Baile Abierta",
        timeline_farewell: "Despedida",
        
        dress_code_title: "Código de Vestimenta",
        formal_attire_title: "Vestimenta Formal",
        dress_code_description: "Solicitamos amablemente que los invitados vistan con vestimenta formal para nuestra celebración.",
        dress_code_men: "Se recomienda que los hombres usen trajes o esmóquines, y las mujeres pueden usar vestidos de cóctel o de noche.",
        dress_code_shoes: "La ceremonia y recepción se llevarán a cabo al aire libre sobre césped, por favor elige calzado apropiado.",
        
        registry_title: "Lista de Regalos",
        gifts_title: "Regalos de Boda",
        gifts_description: "Tu presencia en nuestra boda es el regalo más grande de todos. Sin embargo, si deseas honrarnos con un regalo, nos hemos registrado en los siguientes lugares:",
        gifts_honeymoon: "También hemos incluido una opción para un fondo de luna de miel si prefieres contribuir a nuestra primera aventura como pareja casada.",
        
        // RSVP page
        rsvp_title: "Confirma tu Asistencia a Nuestra Boda",
        rsvp_description: "Por favor déjanos saber si podrás acompañarnos en nuestro día especial. Te pedimos amablemente tu respuesta antes del 11 de marzo de 2026.",
        rsvp_thank_you: "¡Gracias!",
        rsvp_received: "Hemos recibido tu confirmación de asistencia. ¡Esperamos celebrar contigo!",
        rsvp_update: "Si necesitas actualizar tu respuesta, por favor contáctanos directamente.",
        return_home: "Volver al Inicio",
        
        // Footer
        footer_text: "© 2025 Boda de Marianela y Daniel"
    },
    en: {
        // Navigation
        nav_home: "Home",
        nav_details: "Details",
        nav_rsvp: "RSVP",
        
        // Home page
        header_date: "April 11, 2026",
        home_title: "We're Getting Married!",
        home_description: "We're excited to celebrate our special day with you. Please explore our website to find all the information you'll need for our wedding.",
        rsvp_button: "RSVP Now",
        countdown_title: "Countdown to Our Big Day",
        countdown_days: "Days",
        countdown_hours: "Hours",
        countdown_minutes: "Minutes",
        countdown_seconds: "Seconds",
        countdown_finished: "Our Special Day Has Arrived!",
        
        // Details page
        details_title: "Wedding Details",
        details_description: "Here's everything you need to know about our special day.",
        ceremony_title: "Ceremony & Reception",
        venue_title: "The Venue",
        venue_date: "Date:",
        venue_time: "Time:",
        venue_location: "Location:",
        venue_description: "The ceremony and reception will be held at the beautiful Bella Vista Gardens. The ceremony will begin promptly at 3:00 PM, followed by cocktail hour and reception.",
        
        accommodations_title: "Accommodations",
        hotels_title: "Recommended Hotels",
        hotel_code: "We've arranged a special rate for our guests. Use code \"MARIANELYDANIEL\" when booking.",
        hotel_boutique: "A charming boutique hotel just a 5-minute walk from the venue.",
        
        schedule_title: "Schedule",
        timeline_title: "Wedding Day Timeline",
        timeline_arrival: "Guest Arrival",
        timeline_ceremony: "Ceremony Begins",
        timeline_cocktail: "Cocktail Hour",
        timeline_reception: "Reception",
        timeline_dinner: "Dinner Service",
        timeline_first_dance: "First Dance",
        timeline_dance_floor: "Dance Floor Opens",
        timeline_farewell: "Farewell",
        
        dress_code_title: "Dress Code",
        formal_attire_title: "Formal Attire",
        dress_code_description: "We kindly request that guests dress in formal attire for our celebration.",
        dress_code_men: "Men are encouraged to wear suits or tuxedos, and women may wear cocktail dresses or evening gowns.",
        dress_code_shoes: "The ceremony and reception will take place outdoors on grass, so please choose appropriate footwear.",
        
        registry_title: "Registry",
        gifts_title: "Wedding Gifts",
        gifts_description: "Your presence at our wedding is the greatest gift of all. However, if you wish to honor us with a gift, we've registered at the following places:",
        gifts_honeymoon: "We've also included an option for a honeymoon fund if you'd prefer to contribute to our first adventure as a married couple.",
        
        // RSVP page
        rsvp_title: "RSVP to Our Wedding",
        rsvp_description: "Please let us know if you'll be able to join us on our special day. We kindly request your response by March 11, 2026.",
        rsvp_thank_you: "Thank You!",
        rsvp_received: "Your RSVP has been received. We look forward to celebrating with you!",
        rsvp_update: "If you need to update your response, please contact us directly.",
        return_home: "Return to Home",
        
        // Footer
        footer_text: "© 2025 Marianela & Daniel's Wedding"
    }
};

// Language management functions
let currentLanguage = 'es'; // Default to Spanish

function initializeLanguage() {
    // Check if language preference is stored in localStorage
    const savedLanguage = localStorage.getItem('wedding-language');
    if (savedLanguage && translations[savedLanguage]) {
        currentLanguage = savedLanguage;
    }
    
    // Apply the current language
    changeLanguage(currentLanguage);
    updateLanguageButton();
}

function changeLanguage(lang) {
    if (!translations[lang]) return;
    
    currentLanguage = lang;
    localStorage.setItem('wedding-language', lang);
    
    // Update all translatable elements
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    updateLanguageButton();
}

function toggleLanguage() {
    const newLang = currentLanguage === 'es' ? 'en' : 'es';
    changeLanguage(newLang);
}

function updateLanguageButton() {
    const langButton = document.getElementById('language-toggle');
    if (langButton) {
        langButton.textContent = currentLanguage === 'es' ? 'EN' : 'ES';
        langButton.setAttribute('aria-label', 
            currentLanguage === 'es' ? 'Switch to English' : 'Cambiar a Español'
        );
    }
}

// Countdown Timer for Wedding Date
function initializeCountdown() {
    // Set the wedding date - April 11, 2026
    const weddingDate = new Date('April 11, 2026 15:00:00').getTime();
    
    // Update countdown every second
    const countdownTimer = setInterval(function() {
        // Get today's date and time
        const now = new Date().getTime();
        
        // Find the distance between now and the wedding date
        const distance = weddingDate - now;
        
        // Time calculations for days, hours, minutes and seconds
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        // Display the results
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        
        if (daysEl) daysEl.textContent = days;
        if (hoursEl) hoursEl.textContent = hours;
        if (minutesEl) minutesEl.textContent = minutes;
        if (secondsEl) secondsEl.textContent = seconds;
        
        // If the countdown is finished, display a message
        if (distance < 0) {
            clearInterval(countdownTimer);
            const countdownEl = document.getElementById('countdown-timer');
            if (countdownEl) {
                countdownEl.innerHTML = `<h3 data-translate="countdown_finished">${translations[currentLanguage].countdown_finished}</h3>`;
            }
        }
    }, 1000);
}

// Form validation for RSVP page (keeping original functionality)
function initializeFormValidation() {
    const rsvpForm = document.getElementById('rsvp-form');
    if (rsvpForm) {
        rsvpForm.addEventListener('submit', function(event) {
            // Basic form validation
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const attendance = document.getElementById('attendance').value;
            
            if (!name || !email || !attendance) {
                event.preventDefault();
                alert('Please fill in all required fields.');
                return false;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                event.preventDefault();
                alert('Please enter a valid email address.');
                return false;
            }
            
            // Prevent default for now since we don't have server handling
            event.preventDefault();
            alert('Thank you for your RSVP! We look forward to celebrating with you.');
            rsvpForm.reset();
        });
    }
}

// Initialize everything when DOM loads
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguage();
    initializeCountdown();
    initializeFormValidation();
    
    // Add event listener for language toggle button
    const langButton = document.getElementById('language-toggle');
    if (langButton) {
        langButton.addEventListener('click', toggleLanguage);
    }
});