// Language data object containing all translations
const translations = {
    es: {
        // Navigation
        nav_home: "Inicio",
        nav_details: "Detalles",
        nav_rsvp: "Confirmar Asistencia",
        
        // Home page
        header_date: "11 de abril, 2026",
        home_title: "춰Nos Casamos!",
        home_description: "Ser치 un enorme placer que vengas a celebrar nuestro d칤a especia con nosotros. Hemos hecho esta web para que tengas a mano toda la informaci칩n sobre el evento. Ojo, que puede haber cambios de aqu칤 al d칤a de la boda. Ah, y no olvides hacer click en el bot칩n de aqu칤 abajo.",
        rsvp_button: "Confirmar Asistencia",
        countdown_title: "It's the final countdown...",
        countdown_days: "D칤as",
        countdown_hours: "Horas",
        countdown_minutes: "Minutos",
        countdown_seconds: "Segundos",
        countdown_finished: "춰Es hoy!",
        
        // Details page
        details_title: "Detalles de la Boda",
        details_description: "Toda la informaci칩n relevante sobre el evento. Seguimos organiz치ndolo todo as칤 que puede haber alg칰n peque침o cambio, ojo-cuidao.",
        ceremony_title: "Ceremonia y Recepci칩n",
        venue_title: "El Lugar",
        venue_date: "Fecha: 11 de abril, 2026",
        venue_time: "Hora: 12:00 PM - 11:00 PM",
        venue_location: "Ubicaci칩n:",
        venue_description: "La ceremonia y recepci칩n se llevar치n a cabo en el Antiguo Convento de la Encarnaci칩n de Boadilla del Monte. La ceremonia comenzar치 puntualmente a las 12:00 PM en la iglesia del propio convento, parte de la Parroquia de San Crist칩bal. Para el c칩ctel de bienvenida nos moveremos al Claustro del Convento y el banquete tendr치 lugar en uno de sus salones.",
        venue_information: "Informaci칩n detallada para acceder al lugar (2 p치ginas)",
        download_pdf: "Descargar PDF",
        view_venue_guide: "Ver Gu칤a del Lugar",
        parking_title: "Aparcamiento",
        parking_subtitle: "Zonas de Aparcamiento Recomendadas",
        parking_description: "Hay varias opciones de aparcamiento gratuito muy cerca del convento. Haz clic en cada opci칩n para ver la ubicaci칩n en Google Maps:",
        view_map: "Ver en Google Maps",
        parking_tip: "游눠 Consejo:",
        parking_note: "Recomendamos llegar 15-20 minutos antes de la ceremonia para aparcar c칩modamente y caminar tranquilamente hasta el convento.",
        parking_municipal_desc: "Opci칩n principal - A 7 minutos andando del convento",
        parking_palacio_desc: "Zona amplia - A 8 minutos andando del convento", 
        parking_nacedero_desc: "Entrada del parque - A 8 minutos andando del convento",

        accommodations_title: "Alojamiento",
        hotels_title: "TBA",
        hotel_code: "Hemos conseguido una tarifa especial para nuestros invitados. Usa el c칩digo \"MARIANELYDANIEL\" al reservar.",
        
        schedule_title: "Cronograma del d칤a",
        timeline_arrival: "Llegada de Invitados",
        timeline_ceremony: "Comienza la Ceremonia",
        timeline_cocktail: "Hora del C칩ctel",
        timeline_reception: "Banquete",
        timeline_dinner: "Inicio de la Fiesta con Barra libre",
        timeline_first_dance: "Sorpresa",
        timeline_dance_floor: "Recena",
        timeline_farewell: "Despedida",
        
        dress_code_title: "C칩digo de Vestimenta",
        formal_attire_title: "Vestimenta Formal",
        dress_code_description: "No hemos pensado en un c칩digo de vestimenta estricto, m치s all치 de atuendos formales para este tipo de eventos, evitando en la medida de lo posible atuendos casual, zapatillas deportivas, etc, y teniendo en cuenta tendr치 lugar una ceremonia religiosa.",
        dress_code_men: "M치s all치 de eso, la 칰nica restricci칩n es que las mujeres no pueden ir de blanco o tonos similares.",
        dress_code_shoes: "Finalmente, recordar que la boda es en Abril durante el d칤a y que habr치 que adaptarse a la climatolog칤a. La ceremonia tendr치 lugar en la Iglesia del propio convento. Para el c칩ctel de bienvenida pasaremos al Claustro, que cuenta con un techo acristalado y climatizaci칩n. El banquete muy probablemente tendr치 lugar en uno de los salones del convento. Avisaremos con tiempo si esto cambia y decidimos que sea en uno de los patios exteriores. La fiesta con barra libre la haremos en una bodega climatizada, aunque dispone de una zona de patio al aire libre.",
        
        registry_title: "Regalos de Boda",
        gifts_description: "Que vengas a celebrar con nosotros es el regalo m치s grande de todos. No hemos pensado en nada en particular y fortunadamente tenemos de todo. Lo que s칤 nos gusta mucho es viajar y en unos d칤as estaremos de luna de miel...",
        
        // RSVP page
        rsvp_title: "Confirmaci칩n de Asistencia",
        rsvp_description: "Necesitamos saber con antelaci칩n si podr치s acompa침arnos en nuestro d칤a especial. Te pedimos amablemente tu respuesta antes del final de enero de 2026.",
        mobile_form_description: "Por favor, haz click en el bot칩n de abajo para abrir el formulario de confirmaci칩n de asistencia.",
        open_form_button: "Abrir Formulario",
        rsvp_thank_you: "춰Gracias!",
        rsvp_received: "Hemos recibido tus datos y confirmaci칩n de asistencia. 춰Nos vemos pronto!",
        rsvp_update: "Si necesitas modificar tu respuesta, por favor cont치ctanos directamente. En caso de cancelaci칩n, necesitamos saberlo antes de que termine marzo de 2026.",
        return_home: "Volver al Inicio",
        
        // Footer
        footer_text: "춸 2025 Boda de Marianela & Daniel"
    },
    en: {
        // Navigation
        nav_home: "Home",
        nav_details: "Details",
        nav_rsvp: "RSVP",
        
        // Home page
        header_date: "April 11, 2026",
        home_title: "Let's Get Married!",
        home_description: "It will be an enormous pleasure for you to come celebrate our special day with us. We've made this website so you have all the event information at hand. Keep in mind there might be changes between now and the wedding day. Oh, and don't forget to click the button below.",
        rsvp_button: "RSVP Now",
        countdown_title: "It's the final countdown...",
        countdown_days: "Days",
        countdown_hours: "Hours",
        countdown_minutes: "Minutes",
        countdown_seconds: "Seconds",
        countdown_finished: "It's today!",
        
        // Details page
        details_title: "Wedding Details",
        details_description: "All relevant information about the event. We're still organizing everything so there might be some small changes, heads up.",
        ceremony_title: "Ceremony & Reception",
        venue_title: "The Venue",
        venue_date: "Date: April 11, 2026",
        venue_time: "Time: 12:00 PM - 11:00 PM",
        venue_location: "Location:",
        venue_description: "The ceremony and reception will be held at the Antiguo Convento de la Encarnaci칩n in Boadilla del Monte. The ceremony will begin promptly at 12:00 PM in the convent's own church, part of San Crist칩bal Parish. For the welcome cocktail we'll move to the Convent's Cloister, and the banquet will take place in one of its halls.",
        venue_information: "Detailed information to access the venue (2 pages)",
        download_pdf: "Download PDF",
        view_venue_guide: "View Venue Guide",
        parking_title: "Parking",
        parking_subtitle: "Recommended Parking Areas",
        parking_description: "There are several free parking options very close to the convent. Click on each option to see the location on Google Maps:",
        view_map: "View on Google Maps",
        parking_tip: "游눠 Tip:",
        parking_note: "We recommend arriving 15-20 minutes before the ceremony to park comfortably and walk calmly to the convent.",
        parking_municipal_desc: "Main option - 7 minutes walk from the convent",
        parking_palacio_desc: "Large area - 8 minutes walk from the convent",
        parking_nacedero_desc: "Park entrance - 8 minutes walk from the convent",

        accommodations_title: "Accommodations",
        hotels_title: "TBA",
        hotel_code: "We've arranged a special rate for our guests. Use code \"MARIANELYDANIEL\" when booking.",
        
        schedule_title: "Day Schedule",
        timeline_arrival: "Guest Arrival",
        timeline_ceremony: "Ceremony Begins",
        timeline_cocktail: "Cocktail Hour",
        timeline_reception: "Banquet",
        timeline_dinner: "Party Begins with Open Bar",
        timeline_first_dance: "Surprise",
        timeline_dance_floor: "Late Night Snack",
        timeline_farewell: "Farewell",
        
        dress_code_title: "Dress Code",
        formal_attire_title: "Formal Attire",
        dress_code_description: "We haven't thought of a strict dress code, beyond formal attire for this type of events, avoiding as much as possible casual outfits, sneakers, etc., and keeping in mind there will be a religious ceremony.",
        dress_code_men: "Beyond that, the only restriction is that women cannot wear white or similar tones.",
        dress_code_shoes: "Finally, remember that the wedding is in April during the day and you'll need to adapt to the weather. The ceremony will take place in the convent's own church. For the welcome cocktail we'll move to the Cloister, which has a glass roof and climate control. The banquet will most likely take place in one of the convent's halls. We'll give advance notice if this changes and we decide to have it in one of the outdoor patios. The open bar party we'll do in a climate-controlled cellar, although it has an outdoor patio area.",
        
        registry_title: "Wedding Gifts",
        gifts_description: "Your coming to celebrate with us is the biggest gift of all. We haven't thought of anything in particular and fortunately we have everything. What we do like a lot is traveling and in a few days we'll be on our honeymoon...",
        
        // RSVP page
        rsvp_title: "RSVP to Our Wedding",
        rsvp_description: "We need to know in advance if you'll be able to join us on our special day. We kindly request your response before the end of January 2026.",
        mobile_form_description: "Please click the button below to open the RSVP form.",
        open_form_button: "Open Form",
        rsvp_thank_you: "Thank You!",
        rsvp_received: "We've received your details and attendance confirmation. See you soon!",
        rsvp_update: "If you need to modify your response, please contact us directly. In case of cancellation, we need to know before the end of March 2026.",
        return_home: "Return to Home",
        
        // Footer
        footer_text: "춸 2025 Marianela & Daniel's Wedding"
    }
};

// Language management functions
let currentLanguage = 'es'; // Default to Spanish

function initializeLanguage() {
    // Check if language preference is stored in localStorage
    const savedLanguage = localStorage.getItem('wedding-language');
    if (savedLanguage && translations[savedLanguage]) {
        currentLanguage = savedLanguage;
    }
    
    // Apply the current language
    changeLanguage(currentLanguage);
    updateLanguageButton();
}

function changeLanguage(lang) {
    if (!translations[lang]) return;
    
    currentLanguage = lang;
    localStorage.setItem('wedding-language', lang);
    
    // Update all translatable elements
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    updateLanguageButton();
}

function toggleLanguage() {
    const newLang = currentLanguage === 'es' ? 'en' : 'es';
    changeLanguage(newLang);
}

function updateLanguageButton() {
    const langButton = document.getElementById('language-toggle');
    if (langButton) {
        langButton.textContent = currentLanguage === 'es' ? 'EN' : 'ES';
        langButton.setAttribute('aria-label', 
            currentLanguage === 'es' ? 'Switch to English' : 'Cambiar a Espa침ol'
        );
    }
}

// Countdown Timer for Wedding Date
function initializeCountdown() {
    // Set the wedding date - April 11, 2026
    const weddingDate = new Date('April 11, 2026 15:00:00').getTime();
    
    // Update countdown every second
    const countdownTimer = setInterval(function() {
        // Get today's date and time
        const now = new Date().getTime();
        
        // Find the distance between now and the wedding date
        const distance = weddingDate - now;
        
        // Time calculations for days, hours, minutes and seconds
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        // Display the results
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        
        if (daysEl) daysEl.textContent = days;
        if (hoursEl) hoursEl.textContent = hours;
        if (minutesEl) minutesEl.textContent = minutes;
        if (secondsEl) secondsEl.textContent = seconds;
        
        // If the countdown is finished, display a message
        if (distance < 0) {
            clearInterval(countdownTimer);
            const countdownEl = document.getElementById('countdown-timer');
            if (countdownEl) {
                countdownEl.innerHTML = `<h3 data-translate="countdown_finished">${translations[currentLanguage].countdown_finished}</h3>`;
            }
        }
    }, 1000);
}

// Form validation for RSVP page (keeping original functionality)
function initializeFormValidation() {
    const rsvpForm = document.getElementById('rsvp-form');
    if (rsvpForm) {
        rsvpForm.addEventListener('submit', function(event) {
            // Basic form validation
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const attendance = document.getElementById('attendance').value;
            
            if (!name || !email || !attendance) {
                event.preventDefault();
                alert('Please fill in all required fields.');
                return false;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                event.preventDefault();
                alert('Please enter a valid email address.');
                return false;
            }
            
            // Prevent default for now since we don't have server handling
            event.preventDefault();
            alert('Thank you for your RSVP! We look forward to celebrating with you.');
            rsvpForm.reset();
        });
    }
}

// Initialize everything when DOM loads
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguage();
    initializeCountdown();
    initializeFormValidation();
    
    // Add event listener for language toggle button
    const langButton = document.getElementById('language-toggle');
    if (langButton) {
        langButton.addEventListener('click', toggleLanguage);
    }
});