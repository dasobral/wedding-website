// Language data object containing all translations
const translations = {
    es: {
        // Navigation
        nav_home: "Inicio",
        nav_details: "Detalles",
        nav_rsvp: "Confirmar Asistencia",
        
        // Home page
        header_date: "11 de abril, 2026",
        home_title: "¬°Nos Casamos!",
        home_description: "Ser√° un enorme placer que vengas a celebrar nuestro d√≠a especia con nosotros. Hemos hecho esta web para que tengas a mano toda la informaci√≥n sobre el evento. Ojo, que puede haber cambios de aqu√≠ al d√≠a de la boda. Ah, y no olvides hacer click en el bot√≥n de aqu√≠ abajo.",
        rsvp_button: "Confirmar Asistencia",
        countdown_title: "It's the final countdown...",
        countdown_days: "D√≠as",
        countdown_hours: "Horas",
        countdown_minutes: "Minutos",
        countdown_seconds: "Segundos",
        countdown_finished: "¬°Es hoy!",
        
        // Details page
        details_title: "Detalles de la Boda",
        details_description: "Toda la informaci√≥n relevante sobre el evento. Seguimos organiz√°ndolo todo as√≠ que puede haber alg√∫n peque√±o cambio, ojo-cuidao.",
        ceremony_title: "Ceremonia y Recepci√≥n",
        venue_title: "El Lugar",
        venue_date: "Fecha: 11 de abril, 2026",
        venue_time: "Hora: 12:00 PM - 11:00 PM",
        venue_location: "Ubicaci√≥n:",
        venue_description: "La ceremonia y recepci√≥n se llevar√°n a cabo en el Antiguo Convento de la Encarnaci√≥n de Boadilla del Monte. La ceremonia comenzar√° puntualmente a las 12:00 PM en la iglesia del propio convento, parte de la Parroquia de San Crist√≥bal. Para el c√≥ctel de bienvenida nos moveremos al Claustro del Convento y el banquete tendr√° lugar en uno de sus salones.",
        venue_information: "Informaci√≥n detallada para acceder al lugar (2 p√°ginas)",
        download_pdf: "Descargar PDF",
        view_venue_guide: "Ver Gu√≠a del Lugar",
        parking_title: "Aparcamiento",
        parking_subtitle: "Zonas de Aparcamiento Recomendadas",
        parking_description: "Hay varias opciones de aparcamiento gratuito muy cerca del convento. Haz clic en cada opci√≥n para ver la ubicaci√≥n en Google Maps:",
        view_map: "Ver en Google Maps",
        parking_tip: "üí° Consejo:",
        parking_note: "Recomendamos llegar 30 minutos antes de la ceremonia para aparcar c√≥modamente y caminar tranquilamente hasta el convento.",
        parking_municipal_desc: "Opci√≥n principal - A 7 minutos andando del convento",
        parking_palacio_desc: "Zona amplia - A 8 minutos andando del convento", 
        parking_nacedero_desc: "Entrada del parque - A 8 minutos andando del convento",

        accommodations_title: "Alojamiento",
        hotels_title: "TBA",
        hotel_code: "Hemos conseguido una tarifa especial para nuestros invitados. Usa el c√≥digo \"MARIANELYDANIEL\" al reservar.",
        
        schedule_title: "Cronograma del d√≠a",
        timeline_arrival: "Llegada de Invitados",
        timeline_ceremony: "Comienza la Ceremonia",
        timeline_cocktail: "Hora del C√≥ctel",
        timeline_reception: "Banquete",
        timeline_dinner: "Fiesta con Barra libre (habr√° recena m√°s tarde)",
        timeline_farewell: "Despedida",
        
        dress_code_title: "C√≥digo de Vestimenta",
        formal_attire_title: "Vestimenta Formal",
        dress_code_description: "No hemos pensado en un c√≥digo de vestimenta estricto, m√°s all√° de vestimenta formal habitual para este tipo de eventos, evitando en la medida de lo posible atuendos casual, zapatillas deportivas, etc, y teniendo en cuenta tendr√° lugar una ceremonia religiosa.",
        dress_code_men: "La √∫nica restricci√≥n es que las mujeres no pueden ir de blanco o tonos similares.",
        dress_code_shoes: "Finalmente, recordar que la boda es en Abril durante el d√≠a y que habr√° que adaptarse a la climatolog√≠a. La ceremonia tendr√° lugar en la Iglesia del propio convento. Para el c√≥ctel de bienvenida pasaremos al Claustro, que cuenta con un techo acristalado y climatizaci√≥n. El banquete muy probablemente tendr√° lugar en uno de los salones del convento. Avisaremos con tiempo si esto cambia y decidimos que sea en uno de los patios exteriores. La fiesta con barra libre la haremos en una bodega climatizada, aunque dispone de una zona de patio al aire libre.",
        
        registry_title: "Regalos de Boda",
        gifts_description: "Que vengas a celebrar con nosotros es el regalo m√°s grande de todos. No hemos pensado en nada en particular y afortunadamente no nos falta de nada. Lo que s√≠ nos gusta mucho es viajar y en unos d√≠as estaremos de luna de miel... üòâ",
        
        // RSVP page
        rsvp_title: "Confirmaci√≥n de Asistencia",
        rsvp_description: "Necesitamos saber con antelaci√≥n si podr√°s acompa√±arnos en nuestro d√≠a especial. Te pedimos amablemente tu respuesta antes del final de enero de 2026.",
        mobile_form_description: "Completa el formulario y luego regresa aqu√≠.",
        open_form_button: "Abrir Formulario",
        form_done_button: "He Terminado",
        button_separator_text: "‚Üì Tras completar el formulario ‚Üì",
        rsvp_thank_you: "¬°Gracias!",
        rsvp_received: "Hemos recibido tus datos y confirmaci√≥n de asistencia. ¬°Nos vemos pronto!",
        rsvp_update: "Si necesitas modificar tu respuesta, por favor cont√°ctanos directamente. En caso de cancelaci√≥n, necesitamos saberlo antes de que termine marzo de 2026.",
        return_home: "Volver al Inicio",
        
        // Footer
        footer_text: "¬© 2025 Boda de Marianela & Daniel"
    },
    en: {
        // Navigation
        nav_home: "Home",
        nav_details: "Details",
        nav_rsvp: "RSVP",
        
        // Home page
        header_date: "April 11, 2026",
        home_title: "We are getting married!",
        home_description: "It will be an enormous pleasure for you to come celebrate our special day with us. We've made this website so you have all the event information at hand. Keep in mind there might be changes between now and the wedding day. Oh, and don't forget to click the button below.",
        rsvp_button: "RSVP Now",
        countdown_title: "It's the final countdown...",
        countdown_days: "Days",
        countdown_hours: "Hours",
        countdown_minutes: "Minutes",
        countdown_seconds: "Seconds",
        countdown_finished: "It's today!",
        
        // Details page
        details_title: "Wedding Details",
        details_description: "All relevant information about the event. We're still organizing everything so there might be some small changes, heads up.",
        ceremony_title: "Ceremony & Reception",
        venue_title: "The Venue",
        venue_date: "Date: April 11, 2026",
        venue_time: "Time: 12:00 PM - 11:00 PM",
        venue_location: "Location:",
        venue_description: "The ceremony and reception will be held at the Antiguo Convento de la Encarnaci√≥n in Boadilla del Monte. The ceremony will begin promptly at 12:00 PM in the convent's own church, part of San Crist√≥bal Parish. For the welcome cocktail we'll move to the Convent's Cloister, and the banquet will take place in one of its halls.",
        venue_information: "Detailed information to access the venue (2 pages)",
        download_pdf: "Download PDF",
        view_venue_guide: "View Venue Guide",
        parking_title: "Parking",
        parking_subtitle: "Recommended Parking Areas",
        parking_description: "There are several free parking options very close to the convent. Click on each option to see the location on Google Maps:",
        view_map: "View on Google Maps",
        parking_tip: "üí° Tip:",
        parking_note: "We recommend arriving 30 minutes before the ceremony to park comfortably and walk calmly to the convent.",
        parking_municipal_desc: "Main option - 7 minutes walk from the convent",
        parking_palacio_desc: "Large area - 8 minutes walk from the convent",
        parking_nacedero_desc: "Park entrance - 8 minutes walk from the convent",

        accommodations_title: "Accommodations",
        hotels_title: "TBA",
        hotel_code: "We've arranged a special rate for our guests. Use code \"MARIANELYDANIEL\" when booking.",
        
        schedule_title: "Day Schedule",
        timeline_arrival: "Guest Arrival",
        timeline_ceremony: "Ceremony Begins",
        timeline_cocktail: "Cocktail Hour",
        timeline_reception: "Banquet",
        timeline_dinner: "Party with Open Bar (we will have snacks later on)",
        timeline_farewell: "Farewell",
        
        dress_code_title: "Dress Code",
        formal_attire_title: "Formal Attire",
        dress_code_description: "We haven't thought of a strict dress code, beyond formal attire for this type of events, avoiding as much as possible casual outfits, sneakers, etc., and keeping in mind there will be a religious ceremony.",
        dress_code_men: "The only restriction is that women cannot wear white or similar tones.",
        dress_code_shoes: "Finally, remember that the wedding is in April during the day and you'll need to adapt to the weather. The ceremony will take place in the convent's own church. For the welcome cocktail we'll move to the Cloister, which has a glass roof and climate control. The banquet will most likely take place in one of the convent's halls. We'll give advance notice if this changes and we decide to have it in one of the outdoor patios. The open bar party we'll do in a climate-controlled cellar, although it has an outdoor patio area.",
        
        registry_title: "Wedding Gifts",
        gifts_description: "Your coming to celebrate with us is the biggest gift of all. We haven't thought of anything in particular and fortunately we have everything. What we do like a lot is traveling and in a few days we'll be on our honeymoon...",
        
        // RSVP page
        rsvp_title: "RSVP to Our Wedding",
        rsvp_description: "We need to know in advance if you'll be able to join us on our special day. We kindly request your response before the end of January 2026.",
        mobile_form_description: "Complete the form and then return here.",
        open_form_button: "Open Form", 
        form_done_button: "I'm Done",
        button_separator_text: "‚Üì After completing the form ‚Üì",
        rsvp_thank_you: "Thank You!",
        rsvp_received: "We've received your details and attendance confirmation. See you soon!",
        rsvp_update: "If you need to modify your response, please contact us directly. In case of cancellation, we need to know before the end of March 2026.",
        return_home: "Return to Home",
        
        // Footer
        footer_text: "¬© 2025 Marianela & Daniel's Wedding"
    }
};

// Language management functions
let currentLanguage = 'es'; // Default to Spanish

function initializeLanguage() {
    // Check if language preference is stored in localStorage
    const savedLanguage = localStorage.getItem('wedding-language');
    if (savedLanguage && translations[savedLanguage]) {
        currentLanguage = savedLanguage;
    }
    
    // Apply the current language
    changeLanguage(currentLanguage);
    updateLanguageButton();
}

function changeLanguage(lang) {
    if (!translations[lang]) return;
    
    currentLanguage = lang;
    localStorage.setItem('wedding-language', lang);
    
    // Update all translatable elements
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    updateLanguageButton();
}

function toggleLanguage() {
    const newLang = currentLanguage === 'es' ? 'en' : 'es';
    changeLanguage(newLang);
}

function updateLanguageButton() {
    const langButton = document.getElementById('language-toggle');
    if (langButton) {
        langButton.textContent = currentLanguage === 'es' ? 'EN' : 'ES';
        langButton.setAttribute('aria-label', 
            currentLanguage === 'es' ? 'Switch to English' : 'Cambiar a Espa√±ol'
        );
    }
}

// Countdown Timer for Wedding Date
function initializeCountdown() {
    // Set the wedding date - April 11, 2026
    const weddingDate = new Date('April 11, 2026 15:00:00').getTime();
    
    // Update countdown every second
    const countdownTimer = setInterval(function() {
        // Get today's date and time
        const now = new Date().getTime();
        
        // Find the distance between now and the wedding date
        const distance = weddingDate - now;
        
        // Time calculations for days, hours, minutes and seconds
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        
        // Display the results
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        
        if (daysEl) daysEl.textContent = days;
        if (hoursEl) hoursEl.textContent = hours;
        if (minutesEl) minutesEl.textContent = minutes;
        if (secondsEl) secondsEl.textContent = seconds;
        
        // If the countdown is finished, display a message
        if (distance < 0) {
            clearInterval(countdownTimer);
            const countdownEl = document.getElementById('countdown-timer');
            if (countdownEl) {
                countdownEl.innerHTML = `<h3 data-translate="countdown_finished">${translations[currentLanguage].countdown_finished}</h3>`;
            }
        }
    }, 1000);
}

// Form validation for RSVP page (keeping original functionality)
function initializeFormValidation() {
    const rsvpForm = document.getElementById('rsvp-form');
    if (rsvpForm) {
        rsvpForm.addEventListener('submit', function(event) {
            // Basic form validation
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const attendance = document.getElementById('attendance').value;
            
            if (!name || !email || !attendance) {
                event.preventDefault();
                alert('Please fill in all required fields.');
                return false;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                event.preventDefault();
                alert('Please enter a valid email address.');
                return false;
            }
            
            // Prevent default for now since we don't have server handling
            event.preventDefault();
            alert('Thank you for your RSVP! We look forward to celebrating with you.');
            rsvpForm.reset();
        });
    }
}

// Initialize everything when DOM loads
document.addEventListener('DOMContentLoaded', function() {
    initializeLanguage();
    initializeCountdown();
    initializeFormValidation();
    
    // Add event listener for language toggle button
    const langButton = document.getElementById('language-toggle');
    if (langButton) {
        langButton.addEventListener('click', toggleLanguage);
    }
});